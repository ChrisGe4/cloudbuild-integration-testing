# verify that all testing methods work

steps:
- id: 'Docker Compose'
  name: 'gcr.io/cloud-builders/gcloud'
  args: [
      'builds', 
      'submit',
      '--config=cloudbuild.compose.yaml',
      '.'
  ]
  waitFor: ['-']

- id: 'GKE staging cluster'
  name: 'gcr.io/cloud-builders/gcloud'
  args: [
      'builds', 
      'submit',
      '--config=cloudbuild.gke.yaml',
      '.'
  ]
  waitFor: ['-']

- id: 'Single-node Kubernetes'
  name: 'gcr.io/cloud-builders/gcloud'
  args: [
      'builds', 
      'submit',
      '--config=cloudbuild.vm.yaml',
      '.'
  ]
  waitFor: ['-']

- id: 'GKE cluster per test'
  name: 'gcr.io/cloud-builders/gcloud'
  args: [
      'builds', 
      'submit',
      '--config=cloudbuild.gke-per-test.yaml',
      '.'
  ]
  waitFor: ['-']

timeout:
  3600s
